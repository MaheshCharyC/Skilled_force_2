@using Skilled_Force_VS_22.Models
@{
    ViewData["Title"] = "Skilled Force";
}
@model Job

<div class="text-center">
    <h5 class="display-4">Hello @Context.Session.GetString("FirstName").<br> Welcome to Skilled Force</h5>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css" integrity="sha256-3sPp8BkKUE7QyPSl6VfBByBroQbKxKG7tsusY2mhbVY=" crossorigin="anonymous" />
<link href="@Url.Content("~/css/JobList.css")" rel="stylesheet" type="text/css" />


<div class="container">
    <div class="row">
        <div class="col-lg-10 mx-auto mb-4">
            <div class="section-title text-center ">
                <h5 class="top-c-sep">Grow your career with us</h5>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="career-search mb-60">
                @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { @class = "career-form mb-60" }))
                {
                    <div class="row">
                        <div class="col-md-6 col-lg-3 my-3">
                            <div class="input-group position-relative">
                                @Html.TextBox("keywords", null, new { id = "keywords", @class = "form-control", @placeholder="Keyword search"  })
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3 my-3">
                            <div class="">
                                @Html.DropDownList("location", (IEnumerable<SelectListItem>)ViewBag.Locations, new { id = "Location", @class = "custom-select" })
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3 my-3">
                            <div class="">
                                @Html.DropDownList("jobType", (IEnumerable<SelectListItem>)ViewBag.jobTypes, new { id = "Location", @class = "custom-select" })
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3 my-3">
                            <button type="submit" class="btn btn-lg btn-block btn-light btn-custom" id="contact-submit">
                                Search
                            </button>
                        </div>
                    </div>
                }

                <div class="filter-result">
                    <p class="mb-30 ff-montserrat">Total Job Openings : @Enumerable.Count(ViewBag.jobs)</p>
                    @foreach (Job job in ViewBag.jobs)
                    {
                        <div class="job-box d-md-flex align-items-center justify-content-between mb-30">
                            <div class="job-left my-4 d-md-flex align-items-center flex-wrap">
                                <div class="img-holder mr-md-4 mb-md-0 mb-4 mx-auto mx-md-0 d-md-none d-lg-flex">
                                    @if (@job.Title.Split(" ").Count() > 1)
                                    {
                                        @job.Title.Split(" ")[0].Substring(0,1).ToUpper()

                                        @job.Title.Split(" ")[1].Substring(0,1).ToUpper()
                                    }
                                    else
                                    {
                                        @job.Title.Substring(0,2).ToUpper()
                                    }
                                </div>
                                <div class="job-content" style="margin-left:20px">
                                    <h5>@job.Title</h5>
                                    <ul class="d-md-flex flex-wrap text-capitalize ff-open-sans">
                                        <li class="mr-md-4">
                                            <i class="zmdi zmdi-pin mr-2"></i> @job.Location
                                        </li>
                                        <li class="mr-md-4">
                                            <i class="zmdi zmdi-money mr-2"></i> @job.Salary
                                        </li>
                                        <li class="mr-md-4">
                                            <i class="zmdi zmdi-time mr-2"></i> @job.EmploymentType
                                        </li>
                                    </ul>
                                    @if (job.Company != null)
                                    {
                                        @Html.ActionLink(@job.Company.Name, "GetCompanyDetails", "Company", new { @job.Company.CompanyId }, new { @class = "" } )
                                    }
                                </div>
                            </div>
                            <div class="job-right my-4 flex-shrink-0">
                                @if (job.IsApplied)
                                {
                                    @Html.ActionLink("Cancel", "JobCancel", "Job", new { @job.JobId }, new { @class = "btn d-block w-100 d-sm-inline-block btn-primary" } )
                                    @Html.ActionLink("View", "ViewJob", "Job", new { @job.JobId }, new { @class = "btn d-block w-100 d-sm-inline-block btn-primary" } )
                                }
                                else if (@Context.Session.GetString("RoleId").Equals("1"))
                                {
                                    @Html.ActionLink("Apply now", "JobApply", "Job", new { @job.JobId }, new { @class = "btn d-block w-100 d-sm-inline-block btn-primary" } )
                                    @Html.ActionLink("View", "ViewJob", "Job", new { @job.JobId }, new { @class = "btn d-block w-100 d-sm-inline-block btn-primary" } )
                                }
                                else if (@Context.Session.GetString("RoleId").Equals("2") || @Context.Session.GetString("RoleId").Equals("3"))
                                {
                                    @Html.ActionLink("Edit", "JobEditForm", "Job", new { @job.JobId }, new { @class = "btn d-block w-100 d-sm-inline-block btn-primary" } )
                                    @Html.ActionLink("Delete", "JobDelete", "Job", new { @job.JobId }, new { @class = "btn d-block w-100 d-sm-inline-block btn-primary" } )
                                }
                            </div>
                        </div>
                    }
                </div>
            </div>

            <!-- START Pagination -->
            <nav aria-label="Page navigation">
                <ul class="pagination pagination-reset justify-content-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                            <i class="zmdi zmdi-long-arrow-left"></i>
                        </a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item d-none d-md-inline-block"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">...</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">
                            <i class="zmdi zmdi-long-arrow-right"></i>
                        </a>
                    </li>
                </ul>
            </nav>
            <!-- END Pagination -->
        </div>
    </div>

</div>